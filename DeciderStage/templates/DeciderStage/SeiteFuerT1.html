{{ extends "global/CSS_Page.html" }}
{{ load otree }}

{{ block title }}Provide your estimate{{ endblock }}

{{ block content }}
<div>Estimate {{player.round_number}} of {{ Constants.num_rounds }}</div>
<br>
<div><b>Remember:</b> You will earn &pound; {{ Constants.bezahlungProRichtigeSchaetzung|to2 }} for each estimate that is "close enough" to the actual workers' performances.</div>
<br>





<form>
    <style>
        img {
          max-width: 100%;
          height: auto;
        }

        /* Stile für das modale Fenster */
        .modal {
          display: none;
          position: fixed;
          z-index: 1;
          padding-top: 60px;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          overflow: auto;
          background-color: rgb(0,0,0);
          background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
          margin: auto;
          display: block;
          width: 200%;
          max-width: 1400px;
        }

        .close {
          position: absolute;
          top: 15px;
          right: 35px;
          color: #fff;
          font-size: 40px;
          font-weight: bold;
        }

        .close:hover,
        .close:focus {
          color: #bbb;
          text-decoration: none;
          cursor: pointer;
        }

    </style>

    <table class="B-container">
        <tr><td colspan="4">&nbsp;</td></tr>
        <tr>
            <td colspan="4">

                <div>
                    <a href="javascript:void(0)" onclick="openModal()">
                        <img src="{% static 'HistogramAll.jpg' %}" alt="Histogram">
                    </a>
                </div>
                <!-- Modales Fenster -->
                <div id="myModal" class="modal">
                    <span class="close" onclick="closeModal()">&times;</span>
                    <img class="modal-content" id="modalImage">
                </div>

            </td>
        </tr>

        <!-- 2 leere Zeilen als Abstand -->

        <tr>
            <td colspan="4" style="border-bottom: 2px solid black;">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td colspan="4" >
                &nbsp;
            </td>
        </tr>
        <tr>
            <td colspan="4">
                &nbsp;The workers were recruited in the UK, working independently on the encoding task.
            </td>
        </tr>
        <tr>
            <td colspan="4">
                &nbsp;
            </td>
        </tr>



        <!-- 2 leere Zeilen als Abstand ENDE -->
        <!-- Beide zusammen -->
        <tr>

            <td colspan="2" style="text-align: right;">The team of two workers solved a total of: </td>
            <td colspan="2" style="text-align: left;font-size: 130%"><b>{% summe %} tasks</b>. </td>
        </tr>
        <!-- 1 leere Zeile als Abstand -->
        <tr>
            <td colspan="4">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td colspan="4" style="text-align: center;font-size: 120%">
                &nbsp;<strong>Your estimate for ...</strong>
            </td>
        </tr>
        <tr>
            <td colspan="4">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td style="text-align: right;">
                <label for="Spieler1_Schaetzung" style="font-size: 120%"><b>one</b> worker</label>
            </td>
            <td style="text-align: center;">
                <input type="number" id="Spieler1_Schaetzung" name="Spieler1_Schaetzung" value="{{ Spieler1_Schaetzung }}" max="{% summe %}" required>
            </td>
            <td  style="text-align: right;">
                <label for="calculated_field" style="font-size: 120%"><b>the other</b> worker&nbsp;&nbsp;&nbsp;&nbsp;</label>
            </td>
            <td  style="text-align: left;">
                 <input type="text" id="calculated_field" style="background-color: #f0f0f0;" readonly>
            </td>
        </tr>
        <tr>
            <td colspan="3">
                &nbsp;&nbsp;
            </td>
            <td style="text-align: left;">(auto-calculated based on<br>your input)</td>
        </tr>

        <!-- 2 leere Zeilen als Abstand -->

        <tr>
            <td colspan="2">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td colspan="2">
                &nbsp;
            </td>
        </tr>

        <script>
            document.getElementById("Spieler1_Schaetzung").focus();
        </script>

    </table>

    {{ next_button }}


</form>

<script>
        document.addEventListener('DOMContentLoaded', function() {
            var inputField = document.getElementById('Spieler1_Schaetzung');
            var calculatedField = document.getElementById('calculated_field');
            var summeUebergeben =  {{ summe }};

            if (inputField) {
                inputField.addEventListener('input', function() {
                    var inputValue = inputField.value;
                    var parsedValue = parseInt(inputValue) || 0;
                    var calculatedValue = summeUebergeben - parsedValue;
                    calculatedField.value = calculatedValue;
                });
            } else {
                console.error('Element with ID Spieler1_Schaetzung not found.');
            }
        });

        <!-- Soll nicht zurück springen können -->
        window.location.hash="no-back-button";
        window.location.hash="Again-No-back-button";//again because google chrome don't insert first hash into history
        window.onhashchange=function(){window.location.hash="no-back-button";}

            function openModal() {
                document.getElementById('myModal').style.display = "block";
                document.getElementById('modalImage').src = "{% static 'HistogramAll.jpg' %}";
            }

            function closeModal() {
                document.getElementById('myModal').style.display = "none";
            }

    </script>



{{ endblock }}
